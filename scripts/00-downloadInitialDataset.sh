#! /bin/bash

#####################
### INITIAL CHECK ###
#####################

# check to make sure this step should actually be run
clear
printf "%s\n" \
	"" \
	"Be advised: this step was not originally part of the pipeline. We downloaded" \
	"the GenBank files as described in our paper (see README). To reduce the barrier" \
	"of reproducibility, we have included this script to ensure you can get the same" \
	"set of input files we downloaded and curated. If you wish to proceed, the" \
	"contents of the data/original_gb directory will be removed. If you do not wish" \
	"to have those directories cleared and populated with the initial data from our" \
	"analysis, please type \`no' at the prompt or hit ^C (ctrl-C) now. Otherwise," \
	"type \`yes' at the prompt. The prompt will not stop seeking input until only" \
	"either \`no' or \`yes' is provided." \
	""

yn=''
while [ "$yn" != "no" ] && [ "$yn" != "yes" ]
do
	printf "%s" "Do you wish to proceed? (yes/no)  "
	read yn
done

printf "\r%s\r%s" \
	"                                       " \
	"You selected \`${yn}'."

if [ "$yn" == "no" ]
then
	printf "%s\n\n" \
		" Cheers!"
	exit 0

elif [ "$yn" == "yes" ]
then
	printf "%s\n" \
		" This is your last chance to exit."
	for i in {5..1}
	do
		printf "\r%u %s" \
			"${i}" \
			"seconds remaining. If you wish to exit, press ^C now."
		sleep 1
	done

	printf "\r%s\r%s\n\n" \
		"                                                       " \
		"Continuing now."

else
	printf "%s\n\n" \
		" This should not be possible. Exiting now."
	exit 1
fi

############
### MAIN ###
############

MAIN_DIR="$(cd $( dirname "${BASH_SOURCE[0]}" )/..; pwd)"; cd ${MAIN_DIR}
SCRIPTS_DIR="${MAIN_DIR}/scripts"
DATA_DIR="${MAIN_DIR}/data"
ORIG_GB_DIR="${DATA_DIR}/original_gb"
ORIG_GB_CUSTOM_DIR="${ORIG_GB_DIR}/custom_groups"

rm -rf "${ORIG_GB_DIR}"/* &> /dev/null
mkdir -p "${ORIG_GB_CUSTOM_DIR}" &> /dev/null

RECORDS=(
	Eaero_IMP:AP018455,MG516907
	Eaero_KPC:MF156709,KU318419,CP011573,KY093014,KY093013
	Eaero_NDM:KP900015
	Eclo_IMP:CP022533,KT989598,JX101693,KM877517,MF344574,EU855788,EU855787
	Eclo_KPC:MG786907,CP021750,KY296104,KY399973,KY399972,KX783439,KP726894,KP868646,CP011649,CP011582,CP011580,CP011571,CP009853,CP009858,CP008824,CP021900,CP021778,CP018815,KU302800,CP008826,CP008825,CP021899,KX868553,JQ837276
	Eclo_NDM:MF042358,MF042356,KX786648,KY296103,KY399975,KY399974,KC887917,KU302802,KU302801,KP765744,KP868647,KJ812998,KF976405
	Eclo_VIM:MG049738,KR559890,KT345946,KP975077,KF998104,MF178139
	Ecol_IMP:MG516910,MG516909,MG516908,KY887591,KY887596,KY887595,KY887590,KU726588,KU051709,KU051707,KT982616,KT982615,KT982618,KT989376,CP015139
	Ecol_KPC:CP026401,CP026205,CP026204,MG557999,KY062156,KY798506,KX683284,CP019017,CP019006,CP019001,CP018999,CP018989,CP019026,CP018977,CP018974,CP018968,CP018963,CP018959,CP018956,CP018949,CP018945,LT599827,LT599826,KU963389,KU295135,KU295133,KU295132,KP125892,CP009862,KJ933392,KJ146688,KF701335,KF914891,KC788405,KF182187,CP025710,CP021734,LT838197,CP020059,CP019014,CP019010,CP018992,CP018981,CP014669,KU295136,KU295134,KU295131,KP345882,CP010881,CP020119
	Ecol_NDM:KF534788,CP019053,CP024828,CP021936,CP021720,CP021536,AP018143,CP021210,CP021206,CP020056,CP020049,KX503323,CP015835,CP016035,CP012902,KT879914,KR822247,KJ802404,CP010373,KJ440076,KJ413946,JX469383,JF714412,JQ364967,JF503991,AP012208,JF785549,HQ451074,MG271839,CP022226,CP021881,AP018146,AP018142,AP018139,CP021177,KX470734,KC999035,KC887916,CP026577,CP026474,MF679147,MF679143,CP026201,CP025626,CP019073,MF547511,MF547510,MF547509,MF547508,MF547507,CP024805,CP024833,CP024825,CP024818,CP023959,CP023895,CP023871,KX960110,MF353156,MF156713,KY041843,CP021738,CP021692,CP021682,CP021534,AP018147,AP018144,AP018141,AP018138,AP018137,CP017981,KX023261,KY463220,KY435936,KX470735,KX507346,KU167609,KU167608,KX094555,KX674681,KU647721,KX214671,KX214670,KX214669,KX447767,KT824791,KP776609,CP025948,KX833071,KX960109
	Kpneu_IMP:MF344567,MF344565,MF344564,MF344562,MF344561,MF344557,CP025964,CP024557,CP024529,CP024522,CP024192,KX839207,KU862632,KX711880,KU051708,KT982613,KU886034,KM977631,KF250428,MF344566,KY887594,KT345947,AP018454,AB616660,KY978631
	Kpneu_KPC:MF344555,CP026584,CP026589,CP026395,CP026394,CP018887,CP018884,CP026175,CP026179,CP025952,CP025468,CP025463,CP025458,MG053313,MF918372,MG557998,CP025148,CP025147,CP025141,CP025010,CP025009,CP025006,CP023952,CP023942,CP023938,CP023928,MF437312,MF168406,MF168405,MF168404,MF168403,MF168402,MF156708,CP022693,CP022574,MF133495,MF150120,CP021835,CP021743,KY271415,KY271414,KY798507,KY798505,KX928752,KX928751,KX928750,KX397572,KY270850,KY270849,CP020110,KY689238,KX881941,KX348144,CP015395,CP018669,CP018668,CP018455,CP018436,CP018432,CP018426,KX783441,KX783440,CP017937,CP016403,CP016402,KX276209,KX154765,KX756453,KX062091,KX236178,CP015991,KU665642,LT009689,LT009688,LT216438,HG969996,HG969995,KT185451,CP012000,CP011999,CP013325,KP987218,KP893385,CP011991,CP011986,CP011981,CP011622,CP010575,KP008371,CP009465,CP010362,CP010396,KJ653815,CP008833,CP008798,CP007732,KJ146689,KJ146687,KF874497,KF874499,KF874498,KF874496,KF623109,CP003997,CP004367,CP004366,KC958437,CP006657,KF017315,JX397875,KC405622,JX430448,JX461340,JX283456,JX104759,CP003224,HQ589350,FJ628167,FJ223607,FJ223606,CP025144,CP025039,KY930325,KY930324,CP021861,CP021860,CP021756,CP021754,CP021716,CP021548,CP021546,KY271403,CP020075,CP020066,CP019774,KX348146,KX348145,CP015387,CP015824,CP014765,HG969999,HG969998,HG969997,KT148595,KT362706,CP011978,CP011646,CP011645,CP011575,KJ721790,KJ721789,CP009864,CP009776,CP009773,CP007730,CP006919,KF954760,KF954759,KC845573,JX442975,JX193302,JN233705,GU595196,FJ223605,CP018675,KR091915,JX193301,KY271413
	Kpneu_NDM:MF344558,CP026590,CP025965,MF042354,MF042353,MF042350,MF511773,CP024039,CP023488,CP023554,CP023948,CP023923,CP023914,CP023910,CP022126,CP021941,CP021952,CP021947,CP021962,CP021961,CP021709,CP021699,CP021687,CP020854,CP020848,CP020902,CP020068,CP014297,CP018817,CP018366,KT852336,KT852335,CP011839,CP016921,KU314941,KF992018,CP014757,CP012754,KR059864,KR351290,KJ958927,KJ958926,KJ588779,KJ187752,KJ187751,CP010391,KJ440075,CP008933,CP009115,CP006799,KF732966,CP006661,KF220658,KF295829,AP012055,AB759690,KC311431,JX988621,JQ349086,JX104760,JN861072,JN420336,JN157804,CP025517,KM400601,CP024840,CP024836,CP021759,KY130431,KU761328,CP014006,KT725789,KT725788,CP012990,KF220657,KY288024,KX636095
	Kpneu_VIM:MF344563,CP025467,CP023926,KY882285,KY020154,KU318421,KU665641,KF977034,HF955507,JX424614,GU585907,MF582638,KR559889,KR559888
	Paeru_IMP:KX711879,MF344578,KC543497,MF344571,MF344570,MF344568,CP016215
	Paeru_KPC:KY296095,KX169264,KU578314,KC609323,KC609322
	Paeru_VIM:KP873172,KP873171,MF168945,KY494864,KY630469,KX889311,CP011370,KC189475,MF144194,KP975076,AM778842
	Pstu_NDM:KJ802405,JN687470
	Pstu_VIM:JQ824049
	S.mar_IMP:AP013064
	S.mar_KPC:MF156711,CP011639,KU934011
	S.mar_NDM:MF042359,MF042357,MF042352,MF042351
	S.mar_VIM:KJ577613
	custom_groups/E_aerogenes:AP018455,CP011573,KP900015,KU318419,KY093013,KY093014,MF156709,MG516907
	custom_groups/E_cloacae:CP008824,CP008825,CP008826,CP009853,CP009858,CP011571,CP011580,CP011582,CP011649,CP018815,CP021750,CP021778,CP021899,CP021900,CP022533,EU855787,EU855788,JQ837276,JX101693,KC887917,KF976405,KF998104,KJ812998,KM877517,KP726894,KP765744,KP868646,KP868647,KP975077,KR559890,KT345946,KT989598,KU302800,KU302801,KU302802,KX783439,KX786648,KX868553,KY296103,KY296104,KY399972,KY399973,KY399974,KY399975,MF042356,MF042358,MF178139,MF344574,MG049738,MG786907
	custom_groups/E_coli:AP012208,AP018137,AP018138,AP018139,AP018141,AP018142,AP018143,AP018144,AP018146,AP018147,CP009862,CP010373,CP010881,CP012902,CP014669,CP015139,CP015835,CP016035,CP017981,CP018945,CP018949,CP018956,CP018959,CP018963,CP018968,CP018974,CP018977,CP018981,CP018989,CP018992,CP018999,CP019001,CP019006,CP019010,CP019014,CP019017,CP019026,CP019053,CP019073,CP020049,CP020056,CP020059,CP020119,CP021177,CP021206,CP021210,CP021534,CP021536,CP021682,CP021692,CP021720,CP021734,CP021738,CP021881,CP021936,CP022226,CP023871,CP023895,CP023959,CP024805,CP024818,CP024825,CP024828,CP024833,CP025626,CP025710,CP025948,CP026201,CP026204,CP026205,CP026401,CP026474,CP026577,HQ451074,JF503991,JF714412,JF785549,JQ364967,JX469383,KC788405,KC887916,KC999035,KF182187,KF534788,KF701335,KF914891,KJ146688,KJ413946,KJ440076,KJ802404,KJ933392,KP125892,KP345882,KP776609,KR822247,KT824791,KT879914,KT982615,KT982616,KT982618,KT989376,KU051707,KU051709,KU167608,KU167609,KU295131,KU295132,KU295133,KU295134,KU295135,KU295136,KU647721,KU726588,KU963389,KX023261,KX094555,KX214669,KX214670,KX214671,KX447767,KX470734,KX470735,KX503323,KX507346,KX674681,KX683284,KX833071,KX960109,KX960110,KY041843,KY062156,KY435936,KY463220,KY798506,KY887590,KY887591,KY887595,KY887596,LT599826,LT599827,LT838197,MF156713,MF353156,MF547507,MF547508,MF547509,MF547510,MF547511,MF679143,MF679147,MG271839,MG516908,MG516909,MG516910,MG557999
	custom_groups/Enterobacteriaceae:AB616660,AB759690,AP012055,AP012208,AP013064,AP018137,AP018138,AP018139,AP018141,AP018142,AP018143,AP018144,AP018146,AP018147,AP018454,AP018455,CP003224,CP003997,CP004366,CP004367,CP006657,CP006661,CP006799,CP006919,CP007730,CP007732,CP008798,CP008824,CP008825,CP008826,CP008833,CP008933,CP009115,CP009465,CP009773,CP009776,CP009853,CP009858,CP009862,CP009864,CP010362,CP010373,CP010391,CP010396,CP010575,CP010881,CP011571,CP011573,CP011575,CP011580,CP011582,CP011622,CP011639,CP011645,CP011646,CP011649,CP011839,CP011978,CP011981,CP011986,CP011991,CP011999,CP012000,CP012754,CP012902,CP012990,CP013325,CP014006,CP014297,CP014669,CP014757,CP014765,CP015139,CP015387,CP015395,CP015824,CP015835,CP015991,CP016035,CP016402,CP016403,CP016921,CP017937,CP017981,CP018366,CP018426,CP018432,CP018436,CP018455,CP018668,CP018669,CP018675,CP018815,CP018817,CP018884,CP018887,CP018945,CP018949,CP018956,CP018959,CP018963,CP018968,CP018974,CP018977,CP018981,CP018989,CP018992,CP018999,CP019001,CP019006,CP019010,CP019014,CP019017,CP019026,CP019053,CP019073,CP019774,CP020049,CP020056,CP020059,CP020066,CP020068,CP020075,CP020110,CP020119,CP020848,CP020854,CP020902,CP021177,CP021206,CP021210,CP021534,CP021536,CP021546,CP021548,CP021682,CP021687,CP021692,CP021699,CP021709,CP021716,CP021720,CP021734,CP021738,CP021743,CP021750,CP021754,CP021756,CP021759,CP021778,CP021835,CP021860,CP021861,CP021881,CP021899,CP021900,CP021936,CP021941,CP021947,CP021952,CP021961,CP021962,CP022126,CP022226,CP022533,CP022574,CP022693,CP023488,CP023554,CP023871,CP023895,CP023910,CP023914,CP023923,CP023926,CP023928,CP023938,CP023942,CP023948,CP023952,CP023959,CP024039,CP024192,CP024522,CP024529,CP024557,CP024805,CP024818,CP024825,CP024828,CP024833,CP024836,CP024840,CP025006,CP025009,CP025010,CP025039,CP025141,CP025144,CP025147,CP025148,CP025458,CP025463,CP025467,CP025468,CP025517,CP025626,CP025710,CP025948,CP025952,CP025964,CP025965,CP026175,CP026179,CP026201,CP026204,CP026205,CP026394,CP026395,CP026401,CP026474,CP026577,CP026584,CP026589,CP026590,EU855787,EU855788,FJ223605,FJ223606,FJ223607,FJ628167,GU585907,GU595196,HF955507,HG969995,HG969996,HG969997,HG969998,HG969999,HQ451074,HQ589350,JF503991,JF714412,JF785549,JN157804,JN233705,JN420336,JN687470,JN861072,JQ349086,JQ364967,JQ824049,JQ837276,JX101693,JX104759,JX104760,JX193301,JX193302,JX283456,JX397875,JX424614,JX430448,JX442975,JX461340,JX469383,JX988621,KC311431,KC405622,KC788405,KC845573,KC887916,KC887917,KC958437,KC999035,KF017315,KF182187,KF220657,KF220658,KF250428,KF295829,KF534788,KF623109,KF701335,KF732966,KF874496,KF874497,KF874498,KF874499,KF914891,KF954759,KF954760,KF976405,KF977034,KF992018,KF998104,KJ146687,KJ146688,KJ146689,KJ187751,KJ187752,KJ413946,KJ440075,KJ440076,KJ577613,KJ588779,KJ653815,KJ721789,KJ721790,KJ802404,KJ802405,KJ812998,KJ933392,KJ958926,KJ958927,KM400601,KM877517,KM977631,KP008371,KP125892,KP345882,KP726894,KP765744,KP776609,KP868646,KP868647,KP893385,KP900015,KP975077,KP987218,KR059864,KR091915,KR351290,KR559888,KR559889,KR559890,KR822247,KT148595,KT185451,KT345946,KT345947,KT362706,KT725788,KT725789,KT824791,KT852335,KT852336,KT879914,KT982613,KT982615,KT982616,KT982618,KT989376,KT989598,KU051707,KU051708,KU051709,KU167608,KU167609,KU295131,KU295132,KU295133,KU295134,KU295135,KU295136,KU302800,KU302801,KU302802,KU314941,KU318419,KU318421,KU647721,KU665641,KU665642,KU726588,KU761328,KU862632,KU886034,KU934011,KU963389,KX023261,KX062091,KX094555,KX154765,KX214669,KX214670,KX214671,KX236178,KX276209,KX348144,KX348145,KX348146,KX397572,KX447767,KX470734,KX470735,KX503323,KX507346,KX636095,KX674681,KX683284,KX711880,KX756453,KX783439,KX783440,KX783441,KX786648,KX833071,KX839207,KX868553,KX881941,KX928750,KX928751,KX928752,KX960109,KX960110,KY020154,KY041843,KY062156,KY093013,KY093014,KY130431,KY270849,KY270850,KY271403,KY271413,KY271414,KY271415,KY288024,KY296103,KY296104,KY399972,KY399973,KY399974,KY399975,KY435936,KY463220,KY689238,KY798505,KY798506,KY798507,KY882285,KY887590,KY887591,KY887594,KY887595,KY887596,KY930324,KY930325,KY978631,LT009688,LT009689,LT216438,LT599826,LT599827,LT838197,MF042350,MF042351,MF042352,MF042353,MF042354,MF042356,MF042357,MF042358,MF042359,MF133495,MF150120,MF156708,MF156709,MF156711,MF156713,MF168402,MF168403,MF168404,MF168405,MF168406,MF178139,MF344555,MF344557,MF344558,MF344561,MF344562,MF344563,MF344564,MF344565,MF344566,MF344567,MF344574,MF353156,MF437312,MF511773,MF547507,MF547508,MF547509,MF547510,MF547511,MF582638,MF679143,MF679147,MF918372,MG049738,MG053313,MG271839,MG516907,MG516908,MG516909,MG516910,MG557998,MG557999,MG786907
	custom_groups/IMP:AB616660,AP013064,AP018454,AP018455,CP015139,CP016215,CP022533,CP024192,CP024522,CP024529,CP024557,CP025964,EU855787,EU855788,JX101693,KC543497,KF250428,KM877517,KM977631,KT345947,KT982613,KT982615,KT982616,KT982618,KT989376,KT989598,KU051707,KU051708,KU051709,KU726588,KU862632,KU886034,KX711879,KX711880,KX839207,KY887590,KY887591,KY887594,KY887595,KY887596,KY978631,MF344557,MF344561,MF344562,MF344564,MF344565,MF344566,MF344567,MF344568,MF344570,MF344571,MF344574,MF344578,MG516907,MG516908,MG516909,MG516910
	custom_groups/KPC:CP003224,CP003997,CP004366,CP004367,CP006657,CP006919,CP007730,CP007732,CP008798,CP008824,CP008825,CP008826,CP008833,CP009465,CP009773,CP009776,CP009853,CP009858,CP009862,CP009864,CP010362,CP010396,CP010575,CP010881,CP011571,CP011573,CP011575,CP011580,CP011582,CP011622,CP011639,CP011645,CP011646,CP011649,CP011978,CP011981,CP011986,CP011991,CP011999,CP012000,CP013325,CP014669,CP014765,CP015387,CP015395,CP015824,CP015991,CP016402,CP016403,CP017937,CP018426,CP018432,CP018436,CP018455,CP018668,CP018669,CP018675,CP018815,CP018884,CP018887,CP018945,CP018949,CP018956,CP018959,CP018963,CP018968,CP018974,CP018977,CP018981,CP018989,CP018992,CP018999,CP019001,CP019006,CP019010,CP019014,CP019017,CP019026,CP019774,CP020059,CP020066,CP020075,CP020110,CP020119,CP021546,CP021548,CP021716,CP021734,CP021743,CP021750,CP021754,CP021756,CP021778,CP021835,CP021860,CP021861,CP021899,CP021900,CP022574,CP022693,CP023928,CP023938,CP023942,CP023952,CP025006,CP025009,CP025010,CP025039,CP025141,CP025144,CP025147,CP025148,CP025458,CP025463,CP025468,CP025710,CP025952,CP026175,CP026179,CP026204,CP026205,CP026394,CP026395,CP026401,CP026584,CP026589,FJ223605,FJ223606,FJ223607,FJ628167,GU595196,HG969995,HG969996,HG969997,HG969998,HG969999,HQ589350,JN233705,JQ837276,JX104759,JX193301,JX193302,JX283456,JX397875,JX430448,JX442975,JX461340,KC405622,KC609322,KC609323,KC788405,KC845573,KC958437,KF017315,KF182187,KF623109,KF701335,KF874496,KF874497,KF874498,KF874499,KF914891,KF954759,KF954760,KJ146687,KJ146688,KJ146689,KJ653815,KJ721789,KJ721790,KJ933392,KP008371,KP125892,KP345882,KP726894,KP868646,KP893385,KP987218,KR091915,KT148595,KT185451,KT362706,KU295131,KU295132,KU295133,KU295134,KU295135,KU295136,KU302800,KU318419,KU578314,KU665642,KU934011,KU963389,KX062091,KX154765,KX169264,KX236178,KX276209,KX348144,KX348145,KX348146,KX397572,KX683284,KX756453,KX783439,KX783440,KX783441,KX868553,KX881941,KX928750,KX928751,KX928752,KY062156,KY093013,KY093014,KY270849,KY270850,KY271403,KY271413,KY271414,KY271415,KY296095,KY296104,KY399972,KY399973,KY689238,KY798505,KY798506,KY798507,KY930324,KY930325,LT009688,LT009689,LT216438,LT599826,LT599827,LT838197,MF133495,MF150120,MF156708,MF156709,MF156711,MF168402,MF168403,MF168404,MF168405,MF168406,MF344555,MF437312,MF918372,MG053313,MG557998,MG557999,MG786907
	custom_groups/K_pneumoniae:AB616660,AB759690,AP012055,AP018454,CP003224,CP003997,CP004366,CP004367,CP006657,CP006661,CP006799,CP006919,CP007730,CP007732,CP008798,CP008833,CP008933,CP009115,CP009465,CP009773,CP009776,CP009864,CP010362,CP010391,CP010396,CP010575,CP011575,CP011622,CP011645,CP011646,CP011839,CP011978,CP011981,CP011986,CP011991,CP011999,CP012000,CP012754,CP012990,CP013325,CP014006,CP014297,CP014757,CP014765,CP015387,CP015395,CP015824,CP015991,CP016402,CP016403,CP016921,CP017937,CP018366,CP018426,CP018432,CP018436,CP018455,CP018668,CP018669,CP018675,CP018817,CP018884,CP018887,CP019774,CP020066,CP020068,CP020075,CP020110,CP020848,CP020854,CP020902,CP021546,CP021548,CP021687,CP021699,CP021709,CP021716,CP021743,CP021754,CP021756,CP021759,CP021835,CP021860,CP021861,CP021941,CP021947,CP021952,CP021961,CP021962,CP022126,CP022574,CP022693,CP023488,CP023554,CP023910,CP023914,CP023923,CP023926,CP023928,CP023938,CP023942,CP023948,CP023952,CP024039,CP024192,CP024522,CP024529,CP024557,CP024836,CP024840,CP025006,CP025009,CP025010,CP025039,CP025141,CP025144,CP025147,CP025148,CP025458,CP025463,CP025467,CP025468,CP025517,CP025952,CP025964,CP025965,CP026175,CP026179,CP026394,CP026395,CP026584,CP026589,CP026590,FJ223605,FJ223606,FJ223607,FJ628167,GU585907,GU595196,HF955507,HG969995,HG969996,HG969997,HG969998,HG969999,HQ589350,JN157804,JN233705,JN420336,JN861072,JQ349086,JX104759,JX104760,JX193301,JX193302,JX283456,JX397875,JX424614,JX430448,JX442975,JX461340,JX988621,KC311431,KC405622,KC845573,KC958437,KF017315,KF220657,KF220658,KF250428,KF295829,KF623109,KF732966,KF874496,KF874497,KF874498,KF874499,KF954759,KF954760,KF977034,KF992018,KJ146687,KJ146689,KJ187751,KJ187752,KJ440075,KJ588779,KJ653815,KJ721789,KJ721790,KJ958926,KJ958927,KM400601,KM977631,KP008371,KP893385,KP987218,KR059864,KR091915,KR351290,KR559888,KR559889,KT148595,KT185451,KT345947,KT362706,KT725788,KT725789,KT852335,KT852336,KT982613,KU051708,KU314941,KU318421,KU665641,KU665642,KU761328,KU862632,KU886034,KX062091,KX154765,KX236178,KX276209,KX348144,KX348145,KX348146,KX397572,KX636095,KX711880,KX756453,KX783440,KX783441,KX839207,KX881941,KX928750,KX928751,KX928752,KY020154,KY130431,KY270849,KY270850,KY271403,KY271413,KY271414,KY271415,KY288024,KY689238,KY798505,KY798507,KY882285,KY887594,KY930324,KY930325,KY978631,LT009688,LT009689,LT216438,MF042350,MF042353,MF042354,MF133495,MF150120,MF156708,MF168402,MF168403,MF168404,MF168405,MF168406,MF344555,MF344557,MF344558,MF344561,MF344562,MF344563,MF344564,MF344565,MF344566,MF344567,MF437312,MF511773,MF582638,MF918372,MG053313,MG557998
	custom_groups/NDM:AB759690,AP012055,AP012208,AP018137,AP018138,AP018139,AP018141,AP018142,AP018143,AP018144,AP018146,AP018147,CP006661,CP006799,CP008933,CP009115,CP010373,CP010391,CP011839,CP012754,CP012902,CP012990,CP014006,CP014297,CP014757,CP015835,CP016035,CP016921,CP017981,CP018366,CP018817,CP019053,CP019073,CP020049,CP020056,CP020068,CP020848,CP020854,CP020902,CP021177,CP021206,CP021210,CP021534,CP021536,CP021682,CP021687,CP021692,CP021699,CP021709,CP021720,CP021738,CP021759,CP021881,CP021936,CP021941,CP021947,CP021952,CP021961,CP021962,CP022126,CP022226,CP023488,CP023554,CP023871,CP023895,CP023910,CP023914,CP023923,CP023948,CP023959,CP024039,CP024805,CP024818,CP024825,CP024828,CP024833,CP024836,CP024840,CP025517,CP025626,CP025948,CP025965,CP026201,CP026474,CP026577,CP026590,HQ451074,JF503991,JF714412,JF785549,JN157804,JN420336,JN687470,JN861072,JQ349086,JQ364967,JX104760,JX469383,JX988621,KC311431,KC887916,KC887917,KC999035,KF220657,KF220658,KF295829,KF534788,KF732966,KF976405,KF992018,KJ187751,KJ187752,KJ413946,KJ440075,KJ440076,KJ588779,KJ802404,KJ802405,KJ812998,KJ958926,KJ958927,KM400601,KP765744,KP776609,KP868647,KP900015,KR059864,KR351290,KR822247,KT725788,KT725789,KT824791,KT852335,KT852336,KT879914,KU167608,KU167609,KU302801,KU302802,KU314941,KU647721,KU761328,KX023261,KX094555,KX214669,KX214670,KX214671,KX447767,KX470734,KX470735,KX503323,KX507346,KX636095,KX674681,KX786648,KX833071,KX960109,KX960110,KY041843,KY130431,KY288024,KY296103,KY399974,KY399975,KY435936,KY463220,MF042350,MF042351,MF042352,MF042353,MF042354,MF042356,MF042357,MF042358,MF042359,MF156713,MF344558,MF353156,MF511773,MF547507,MF547508,MF547509,MF547510,MF547511,MF679143,MF679147,MG271839
	custom_groups/NOT_Enterobacteriaceae:AM778842,CP011370,CP016215,KC189475,KC543497,KC609322,KC609323,KP873171,KP873172,KP975076,KU578314,KX169264,KX711879,KX889311,KY296095,KY494864,KY630469,MF144194,MF168945,MF344568,MF344570,MF344571,MF344578
	custom_groups/P_aeruginosa:AM778842,CP011370,CP016215,KC189475,KC543497,KC609322,KC609323,KP873171,KP873172,KP975076,KU578314,KX169264,KX711879,KX889311,KY296095,KY494864,KY630469,MF144194,MF168945,MF344568,MF344570,MF344571,MF344578
	custom_groups/P_stuartii:JN687470,JQ824049,KJ802405
	custom_groups/S_marcescens:AP013064,CP011639,KJ577613,KU934011,MF042351,MF042352,MF042357,MF042359,MF156711
	custom_groups/VIM:AM778842,CP011370,CP023926,CP025467,GU585907,HF955507,JQ824049,JX424614,KC189475,KF977034,KF998104,KJ577613,KP873171,KP873172,KP975076,KP975077,KR559888,KR559889,KR559890,KT345946,KU318421,KU665641,KX889311,KY020154,KY494864,KY630469,KY882285,MF144194,MF168945,MF178139,MF344563,MF582638,MG049738
)

CMD_EXIT=0

for record in ${RECORDS[@]}
do

	GROUP=`printf "$record" | cut -d ':' -f 1`
	ACC_LIST=`printf "$record" | cut -d ':' -f 2`

	curl "https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi" \
		--data-urlencode "db=nuccore" \
		--data-urlencode "rettype=gbwithparts" \
		--data-urlencode "retmode=text" \
		--data-urlencode "id=${ACC_LIST}" \
		-X "POST" \
		--compressed \
		-H "Upgrade-Insecure-Requests: 1" \
		-H "DNT: 1" \
		-H "Connection: keep-alive" \
		-o "${ORIG_GB_DIR}/${GROUP}.gb"
	
	CURL_EXIT=$?
	STATUS="succeeded"

	if [ $CURL_EXIT -ne 0 ]
	then
		STATUS="failed"
		CMD_EXIT=$(bc <<< "${CMD_EXIT}+1")
	fi

	printf "%s: %s\n" \
		"${GROUP}" \
		"${STATUS}" \
		1>&2

done

if [ $CMD_EXIT -gt 0 ]
then
	printf "%s %u %s\n\n" \
		"It Looks like" \
		"$CMD_EXIT" \
		"failed." \
		1>&2

fi

exit ${CMD_EXIT}

